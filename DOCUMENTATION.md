# Документация проекта

## Содержание
1. [Обзор проекта](#обзор-проекта)
2. [Архитектура](#архитектура)
3. [Компоненты системы](#компоненты-системы)
4. [Обработка текста](#обработка-текста)
5. [База данных](#база-данных)
6. [API](#api)
7. [Развертывание](#развертывание)

## Обзор проекта

Проект представляет собой систему рекомендаций, основанную на анализе текстовых данных. Система использует различные методы обработки естественного языка для извлечения ключевой информации из текстов и формирования рекомендаций.

## Архитектура

Проект построен на основе модульной архитектуры с четким разделением ответственности между компонентами:

```
project/
├── src/                    # Исходный код
│   ├── text_processor.py   # Обработка текста
│   ├── database.py        # Работа с БД
│   ├── api.py             # API endpoints
│   └── utils.py           # Вспомогательные функции
├── database/              # Скрипты БД
├── tests/                 # Тесты
├── frontend/             # Веб-интерфейс
└── input/                # Входные данные
```

## Компоненты системы

### Обработка текста (text_processor.py)

Модуль отвечает за нормализацию и обработку текстовых данных. Основные функции:

- Нормализация текста
- Лемматизация
- Обработка составных терминов
- Удаление стоп-слов

#### Нормализация текста

Процесс нормализации включает следующие шаги:
1. Приведение к нижнему регистру
2. Замена составных терминов
3. Удаление специальных символов
4. Токенизация
5. Удаление стоп-слов
6. Лемматизация

#### Лемматизация

Используется библиотека pymorphy2 для приведения слов к нормальной форме. Особенности:
- Приоритет существительных при лемматизации
- Обработка исключений для специальных терминов
- Сохранение составных терминов

#### Составные термины

Система поддерживает обработку составных терминов через словарь `DOMAIN_PHRASES`. Примеры:
- "программное обеспечение"
- "база данных"
- "система управления"

### База данных (database.py)

Модуль обеспечивает работу с SQLite базой данных. Основные функции:
- Инициализация БД
- Загрузка данных
- Обновление записей
- Поиск и фильтрация

### API (api.py)

REST API для взаимодействия с системой. Основные эндпоинты:
- `/api/texts` - работа с текстами
- `/api/recommendations` - получение рекомендаций
- `/api/statistics` - статистика

## Обработка текста

### Процесс нормализации

1. **Подготовка текста**
   - Приведение к нижнему регистру
   - Замена составных терминов
   - Удаление специальных символов

2. **Токенизация**
   - Разбиение на слова
   - Обработка составных терминов
   - Удаление стоп-слов

3. **Лемматизация**
   - Приведение к нормальной форме
   - Обработка исключений
   - Сохранение специальных терминов

### Исключения и специальные случаи

Система обрабатывает следующие специальные случаи:
- Составные термины (через словарь `DOMAIN_PHRASES`)
- Исключения лемматизации (через словарь `LEMMATIZATION_EXCEPTIONS`)
- Специальные символы и форматирование

## База данных

### Структура БД

Основные таблицы:
- `texts` - исходные тексты
- `normalized_texts` - нормализованные тексты
- `recommendations` - рекомендации
- `statistics` - статистика

### Операции с БД

1. **Инициализация**
   ```python
   python main.py --init-db
   ```

2. **Загрузка данных**
   ```python
   python main.py --load-data
   ```

3. **Нормализация текстов**
   ```python
   python main.py --normalize-texts
   ```

## API

### Эндпоинты

1. **Тексты**
   - GET `/api/texts` - получение списка текстов
   - POST `/api/texts` - добавление нового текста
   - GET `/api/texts/{id}` - получение текста по ID

2. **Рекомендации**
   - GET `/api/recommendations` - получение рекомендаций
   - POST `/api/recommendations` - создание рекомендаций

3. **Статистика**
   - GET `/api/statistics` - получение статистики

## Развертывание

### Требования

- Python 3.8+
- SQLite 3
- Зависимости из requirements.txt

### Установка

1. Клонирование репозитория
2. Создание виртуального окружения
3. Установка зависимостей
4. Инициализация БД
5. Запуск приложения

### Запуск

```bash
python main.py
```

### Тестирование

```bash
pytest tests/
```
