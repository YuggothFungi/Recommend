# Документация проекта

## Содержание
1. [Обзор проекта](#обзор-проекта)
2. [Архитектура](#архитектура)
3. [Компоненты системы](#компоненты-системы)
4. [Обработка текста](#обработка-текста)
5. [База данных](#база-данных)
6. [API](#api)
7. [Развертывание](#развертывание)

## Обзор проекта

Проект представляет собой систему рекомендаций, основанную на анализе текстовых данных. Система использует различные методы обработки естественного языка для извлечения ключевой информации из текстов и формирования рекомендаций.

## Архитектура

Проект построен на основе модульной архитектуры с четким разделением ответственности между компонентами:

```
project/
├── src/                    # Исходный код
│   ├── text_processor.py   # Обработка текста
│   ├── vectorizer.py       # Векторизация текста
│   ├── data_loader.py      # Загрузка данных
│   ├── main.py            # Точка входа
│   ├── schema.py          # Схема БД
│   └── utils/             # Вспомогательные модули
├── database/              # База данных
├── input/                 # Входные данные
└── frontend/             # Веб-интерфейс
```

## Компоненты системы

### Обработка текста (text_processor.py)

Класс TextProcessor описывает объект "Обработчик текста", реализует действия:
- "нормализация" для "приведения текста к нормализованному виду"
- "лемматизация" для "приведения слов к нормальной форме"
- "обработка составных терминов" для "сохранения тематических словосочетаний"

Основные функции:
- Нормализация текста
- Лемматизация с использованием pymorphy2
- Обработка составных терминов
- Удаление стоп-слов
- Сохранение специальных терминов

#### Нормализация текста

Процесс нормализации включает следующие шаги:
1. Приведение к нижнему регистру
2. Замена составных терминов
3. Удаление специальных символов
4. Токенизация
5. Удаление стоп-слов
6. Лемматизация

#### Лемматизация

Используется библиотека pymorphy2 для приведения слов к нормальной форме. Особенности:
- Приоритет существительных при лемматизации
- Обработка исключений для специальных терминов
- Сохранение составных терминов

### База данных (schema.py)

Класс Database описывает объект "База данных", реализует действия:
- "инициализация" для "создания структуры базы данных"
- "сброс" для "удаления всех таблиц и данных"
- "загрузка" для "импорта данных из файлов"

Основные таблицы:
1. `disciplines` - дисциплины
2. `semesters` - семестры
3. `sections` - разделы
4. `lecture_topics` - темы лекций
5. `practical_topics` - темы практик
6. `self_control_questions` - вопросы для самоконтроля
7. `competencies` - компетенции
8. `specialties` - специальности
9. `labor_functions` - трудовые функции

### Векторизация (vectorizer.py)

Класс Vectorizer описывает объект "Векторизатор", реализует действия:
- "векторизация" для "преобразования текстов в векторы"
- "сохранение" для "сохранения векторов в базе данных"
- "загрузка" для "загрузки векторов из базы данных"

Поддерживаемые методы векторизации:
1. TF-IDF
   - Векторизация на основе частоты терминов
   - Учет важности терминов в корпусе
   - Нормализация векторов

2. ruBERT
   - Векторизация на основе языковой модели
   - Учет контекста и семантики
   - Нормализация векторов

### Загрузка данных (data_loader.py)

Класс DataLoader описывает объект "Загрузчик данных", реализует действия:
- "загрузка" для "импорта данных из файлов"
- "проверка" для "валидации загруженных данных"
- "обработка" для "подготовки данных к использованию"

Поддерживаемые форматы данных:
1. JSON
   - Компетенции
   - Трудовые функции
   - Учебные планы

2. SQLite
   - Хранение структурированных данных
   - Векторные представления
   - Результаты анализа

## API

### Эндпоинты

1. Конфигурации
   - GET /api/configurations - список конфигураций
   - GET /api/configurations/{id} - детали конфигурации
   - POST /api/configurations - создание конфигурации
   - PUT /api/configurations/{id} - обновление конфигурации
   - DELETE /api/configurations/{id} - удаление конфигурации

2. Векторизация
   - POST /api/vectorize - векторизация текстов
   - GET /api/vectorize/{id} - статус векторизации
   - GET /api/vectorize/{id}/results - результаты векторизации

3. Сходство
   - POST /api/similarity - расчет сходства
   - GET /api/similarity/{id} - статус расчета
   - GET /api/similarity/{id}/results - результаты расчета

## Развертывание

### Требования

1. Python 3.8+
2. SQLite 3
3. CUDA (для ruBERT)

### Установка

1. Клонирование репозитория
2. Установка зависимостей:
   ```bash
   pip install -r requirements.txt
   ```
3. Инициализация базы данных:
   ```bash
   python src/main.py --init-db
   ```
4. Загрузка данных:
   ```bash
   python src/main.py --load-data
   ```

### Запуск

1. Запуск веб-сервера:
   ```bash
   python src/main.py --web
   ```
2. Доступ к интерфейсу:
   ```
   http://localhost:5000
   ```

### Конфигурация

1. Настройка БД
   - Путь к файлу БД
   - Настройки подключения
   - Оптимизация запросов

2. Настройка API
   - Порт и хост
   - Аутентификация
   - Логирование

3. Настройка безопасности
   - Защита от SQL-инъекций
   - Валидация входных данных
   - Ограничение доступа
